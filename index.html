<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <title>GPS AN-32B</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
  <h2>üì° Enviando posici√≥n GPS‚Ä¶</h2>
  <p id="status">Esperando GPS...</p>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

    // üîê TU CONFIGURACI√ìN FIREBASE

    
   // Import the functions you need from the SDKs you need
import { initializeApp } from "firebase/app";
import { getAnalytics } from "firebase/analytics";
// TODO: Add SDKs for Firebase products that you want to use
// https://firebase.google.com/docs/web/setup#available-libraries

// Your web app's Firebase configuration
// For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyCDHpTxxw0XObZFaG4G7VRVl8-ouszM5e8",
  authDomain: "tracker-an32b.firebaseapp.com",
  databaseURL: "https://tracker-an32b-default-rtdb.firebaseio.com",
  projectId: "tracker-an32b",
  storageBucket: "tracker-an32b.firebasestorage.app",
  messagingSenderId: "671744221089",
  appId: "1:671744221089:web:60af7fbf5e992210ec75e0",
  measurementId: "G-48LH0HJRCE"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const analytics = getAnalytics(app);

    

    // üî• Inicializar Firebase
    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    const status = document.getElementById("status");

    // üì° GPS en tiempo real
    navigator.geolocation.watchPosition(
      pos => {
        const data = {
          lat: pos.coords.latitude,
          lon: pos.coords.longitude,
          alt: pos.coords.altitude || 1000,
          acc: pos.coords.accuracy,
          time: Date.now()
        };

        set(ref(db, "an32/position"), data);

        status.innerHTML = `
          Lat: ${data.lat}<br>
          Lon: ${data.lon}<br>
          Alt: ${data.alt} m<br>
          Precisi√≥n: ${data.acc} m
        `;
      },
      err => {
        status.innerText = "‚ùå Error GPS: " + err.message;
      },
      {
        enableHighAccuracy: true,
        maximumAge: 0,
        timeout: 10000
      }
    );
  </script>
</body>
</html>

