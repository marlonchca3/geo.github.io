<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <title>GPS AN-32B</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
  <h2>üì° Enviando posici√≥n GPS‚Ä¶</h2>
  <p id="status">Esperando GPS...</p>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

    // üîê TU CONFIGURACI√ìN FIREBASE
    const firebaseConfig = {
      apiKey: "TU_API_KEY",
      authDomain: "TU_PROYECTO.firebaseapp.com",
      databaseURL: "https://TU_PROYECTO-default-rtdb.firebaseio.com",
      projectId: "TU_PROYECTO",
      appId: "TU_APP_ID"
    };

    // üî• Inicializar Firebase
    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    const status = document.getElementById("status");

    // üì° GPS en tiempo real
    navigator.geolocation.watchPosition(
      pos => {
        const data = {
          lat: pos.coords.latitude,
          lon: pos.coords.longitude,
          alt: pos.coords.altitude || 1000,
          acc: pos.coords.accuracy,
          time: Date.now()
        };

        set(ref(db, "an32/position"), data);

        status.innerHTML = `
          Lat: ${data.lat}<br>
          Lon: ${data.lon}<br>
          Alt: ${data.alt} m<br>
          Precisi√≥n: ${data.acc} m
        `;
      },
      err => {
        status.innerText = "‚ùå Error GPS: " + err.message;
      },
      {
        enableHighAccuracy: true,
        maximumAge: 0,
        timeout: 10000
      }
    );
  </script>
</body>
</html>
